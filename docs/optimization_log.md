# 数据库迁移日志: SQLite 到 PostgreSQL

## 1. 迁移概述
本项目已完成从 SQLite 到 PostgreSQL 的架构兼容性改造。系统现在支持通过环境变量自动切换数据库后端。

## [2026-02-01] “破釜沉舟”式清理：彻底移除 SQLite

### 变动说明
为了简化架构并充分利用 PostgreSQL 的高级特性（如 `JSONB`, `GIS` 等），本项目决定彻底移除对 SQLite 的支持。这不仅是代码逻辑的精简，也是生产环境向更稳健、高并发架构的全面倾斜。

### 核心改动
- **代码清理**: 
    - 移除了 `src/core/db_base.py`、`src/core/db_helper.py`、`src/core/db_transactions.py`、`src/core/db_queries.py` 等文件中所有对 `sqlite3` 的导入和 `if DB_TYPE == "sqlite"` 的条件判断。
    - PostgreSQL 现已成为硬编码的唯一支持后端。
    - 统一了 SQL 占位符为 `%s`。
    - 删除了针对 SQLite 的语法补丁（如 `strftime` 替换为 PG 的 `extract` 或 `date_trunc`）。
- **文件清理**: 
    - 物理删除了项目根目录及 `src` 目录下的所有 `.db` 文件。
- **依赖优化**:
    - 在 `requirements.txt` 中显式添加了 `psycopg2-binary`。
- **环境要求**:
    - 必须在运行环境配置有效的 PostgreSQL 环境变量，否则系统将无法初始化数据库连接。

### 遗留注意事项
- 以后再无 `ledger_alpha.db` 可用，请确保本地开发环境已启动 PostgreSQL 实例。

---
*Generated by DB Purge Subagent*
