# LedgerAlpha 优化建议 (Round 6) - v4.12 架构韧性与智能决策

基于对核心文档（白皮书、需求规格说明书）的最新一轮研读，针对系统的容错性、成本效益及跨周期洞察，提出以下 5 个深度优化建议：

## 1. 落地“模型熔断”降级机制 (Non-Functional 4.1)
*   **建议内容**：建立 `CircuitBreaker` 机制，应对 L2 (OpenManus) 连续失败或 Token 超支。
*   **技术实现**：在 `RoutingRegistry` 中集成 `check_circuit_breaker()`。当熔断开启时，强制拦截所有升级 L2 的请求，改由 L1 执行带风险标签的降级分类。
*   **价值**：保障 MasterDaemon 核心链路的物理不中断，在极端异常下维持基本的离线记账能力。

## 2. 增强“审计画像”自学习博弈 (F3.2.2)
*   **建议内容**：红方审计不应仅靠静态规则，应具备对“历史驳回”的学习能力。
*   **技术实现**：在 `AuditorAgent` 中新增特征匹配。针对被老板多次驳回（REJECT）的供应商，即使置信度高，也自动降低权重并增加“离群惩罚项”。
*   **价值**：实现审计层面的自进化，有效封堵 AI 在特定供应商上的习惯性入账幻觉。

## 3. 实现“每日效益”趋势持久化 (F4.2)
*   **建议内容**：将 ROI（投资回报率）从瞬时统计升级为时序分析。
*   **技术实现**：升级 `DBHelper` 初始化逻辑，建立 `roi_history` 效益表。MasterDaemon 每日定时将“已省工时”与“Token 支出”物理化。
*   **价值**：为老板提供直观的“AI 会计效益增长曲线”，量化系统产生的直接经济贡献。

## 4. 补全“专家词库”行业强制升级 (Adaptive Routing)
*   **建议内容**：对高价值资产判别实施“行业专项强制路由”。
*   **技术实现**：在 `RoutingRegistry` 中完善 `sector_expert_kws`。针对制造业的“制造费用”或软件业的“算力扩容”，无视置信度，强制由 L2 进行合规核定。
*   **价值**：确保 100% 的行业专业度，防止核心成本项被 L1 误分类。

## 5. 完善“多模态资产”聚合视图 (F3.1.3)
*   **建议内容**：解决数据库中多角度照片存储分散的问题。
*   **技术实现**：在 `DBHelper` 中新增 `v_asset_summary` 视图，基于 `group_id` 将零散的入库记录逻辑上合而为一。
*   **价值**：支持老板通过 IM 一键查阅“资产实体包”完整信息，极大提升复杂实物资产入账的确认效率。

---
建议提交人：无敌大旋风 (LedgerAlpha 首席架构小狗)
日期：2026-01-31
