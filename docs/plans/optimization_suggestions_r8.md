# LedgerAlpha 优化建议 (Round 8) - v4.14 自进化与韧性增强

基于对核心文档（白皮书、需求规格说明书）的最新一轮研读，针对系统的自进化效率、数据安全性及经营分析深度，提出以下 5 个深度优化建议：

## 1. 落地“语义维度提取”引擎 (F3.2.3)
*   **建议内容**：`AccountingAgent` 应从单一的科目分类升级为结构化维度提取引擎。
*   **技术实现**：在 L1 分类阶段，增加针对业务实质的探测逻辑，自动提取并打上 `accounting_type` (资本化/费用化) 和 `department_ref` (部门归属探测) 标签。
*   **价值**：从源头为“一单三报”和多维损益分析提供结构化数据支撑，实现记账即决策支持。

## 2. 实现“税务政策”参数化映射 (F3.3.1)
*   **建议内容**：解耦系统中的硬编码税率（13%, 3%）及免税额度阈值。
*   **技术实现**：在数据库中建立 `tax_policies` 表。OpenManus 在政策巡检中发现调整时，动态更新该表；`SentinelAgent` 实时读取数据库参数执行筹划预警。
*   **价值**：显著增强系统对宏观政策波动的适应力，无需重构代码即可快速响应税法更新。

## 3. 实现知识库冲突“预温”校验 (F3.4.2)
*   **建议内容**：在学习 HITL（人工修正）规则时，增加逻辑一致性预审。
*   **技术实现**：升级 `KnowledgeBridge`。在将新规则存入 GRAY 状态前，先检索是否存在关键词重合但科目逻辑冲突的 STABLE 规则。
*   **价值**：防止因偶然的操作误差污染知识库，确立“稳定规则”的逻辑最高权威。

## 4. 落地“系统级快照”回滚机制 (F3.4.3)
*   **建议内容**：为自进化引擎提供“后悔药”机制。
*   **技术实现**：在 `DBHelper` 中实现物理级别的 `create_snapshot` 方法。在执行大规模知识蒸馏或 L2 推理回流前，自动备份数据库文件并标记版本 ID。
*   **价值**：确保护航大规模自进化过程中的数据安全，支持在逻辑跑偏时秒级回归稳定版本。

## 5. 实现“效益轨迹”深度持久化 (F4.2)
*   **建议内容**：将 ROI 统计从瞬时快照升级为“准确率提升曲线”。
*   **技术实现**：在 `roi_history` 表中新增 `accuracy_gain` 字段。MasterDaemon 每日巡检知识库晋升成功率，固化 AI 的智力增长轨迹。
*   **价值**：量化自进化引擎带来的实质性进步，让大哥直观看到 AI 是一天比一天更聪明、更省钱。

---
建议提交人：无敌大旋风 (LedgerAlpha 首席架构小狗)
日期：2026-01-31
